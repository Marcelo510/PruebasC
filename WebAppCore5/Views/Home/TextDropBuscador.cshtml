@model List<DatosListas>


@{
    ViewData["Title"] = "TextDropBuscador";
}

<h1>TextDropBuscador</h1>

<div>
    <input type="text" placeholder="Filtre por datos" autocomplete="off" />
    <br />
    <select multiple>
        @foreach (var item in Model)
        {
            <option value="@item.Nombre">@item.Nombre</option>
        }
    </select>
</div>


<script>
    (function () {
        const select = document.querySelectorAll('select');
        const options = Array.from(select[0].options);
        const input = document.querySelector('input');

        function findMatches(search, options) {
            return options.filter(option => {
                const regex = new RegExp(search, 'gi');
                return option.text.match(regex);
            });
        }

        function filterOptions() {
            options.forEach(option => {
                option.remove();
                option.selected = false;
            });
            const matchArray = findMatches(this.value, options);
            select[0].append(...matchArray);
        }

        input.addEventListener('change', filterOptions);
        input.addEventListener('keyup', filterOptions);
    })();
</script>

